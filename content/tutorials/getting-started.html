<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Getting started 2
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="">
    <link rel="shortcut icon" type="image/x-icon" href="/fslabsite/content/tutorials//img/favicon.ico">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script> -->

    <link type="text/css" rel="stylesheet" href="/fslabsite/content/tutorials/content/fsdocs-default.css" />
    <link type="text/css" rel="stylesheet" href="/fslabsite/content/tutorials/content/fsdocs-custom.css" />
    <script type="text/javascript" src="/fslabsite/content/tutorials/content/fsdocs-tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <!-- END SEARCH BOX: this adds support for the search box -->
    
</head> 

<body>
    <div class="columns is-fullheight m-0">
        <div id="fsdocs-menu" class="column is-2 is-paddingless">
            <aside class="menu">
                <div class="container is-paddingless is-marginless has-background-dark">
                    <a href="/fslabsite/content/tutorials/">
                        <figure class="image is-128x128 container">
                            <img src="/fslabsite/content/tutorials/img/logo.png">
                        </figure>
                    </a>
                    <h2 class="title has-text-centered has-text-white pb-4">FsLab tutorials and guides</h2>
                </div>
                <div class="content">
                    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
                    <div id="header">
                        <div class="searchbox" id="fsdocs-searchbox">
                            <label for="search-by">
                                <i class="fas fa-search"></i>
                            </label>
                            <input data-search-input="" id="search-by" type="search" placeholder="Search..." class="input"/>
                            <span data-search-clear="">
                                <i class="fas fa-times"></i>
                            </span>
                        </div>
                    </div>
                    <!-- END SEARCH BOX: this adds support for the search box -->
                    <ul class="navbar-nav">
                        <li class="nav-header">Links</li>
                        <li class="nav-item" id="fsdocs-license-link"><a class="nav-link" href="{{fsdocs-license-link}}">License (MIT)</a></li>
                        <li class="nav-item" id="fsdocs-release-notes-link"><a class="nav-link" href="{{fsdocs-release-notes-link}}">Release Notes</a></li>
                        <li class="nav-item" id="fsdocs-repository-link"><a class="nav-link" href="{{fsdocs-repository-link}}">Source Repository</a></li>
                        <li class="nav-header">
  Documentation
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fslabsite/content/tutorials/getting-started.html">
    Getting started 2

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fslabsite/content/tutorials/4_getting-started.html">
    Getting started

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fslabsite/content/tutorials/1_fsharp-code-example.html">
    F# code formatting example

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fslabsite/content/tutorials/3_notebooks.html">
    Including notebooks

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fslabsite/content/tutorials/0_Markdown-Cheatsheet.html">
    Markdown cheatsheet

  </a>
</li>             
<li class="nav-item">
  <a class="nav-link" href="/fslabsite/content/tutorials/2_inline-references.html">
    Inline package references and charting

  </a>
</li>
                    </ul>
                </div>
            </aside>
        </div>
        <div class="column is-10 is-paddingless">
            <div class="section pt-4">
                <div class="container" id="fsdocs-content">
                    <h1><a name="Getting-started-2" class="anchor" href="#Getting-started-2">Getting started 2</a></h1>
<p>try if this compiles? lel</p>
<p>Glad to see you here! Now that you found out and learned about FsLab, this section aims to illustrate how FsLab packages synergize and can be used to tackle
practical data science challenges. Note that every package used througout the tutorial has its own documentation so if you are interested in Deedle (link), FSharp.Stats or Plotly.Net feel free to take a deeper dive.</p>
<h2><a name="Referencing-packages" class="anchor" href="#Referencing-packages">Referencing packages</a></h2>
<p>FsLab is a meant to be a project incubation space and can be thought of as a safe heaven for both, package developers and package users by providing guidelines and tutorials. Packages provided by the community can be used on their own, in combination with other FsLab packages but also in combination with any other .netstandard 2.0 compatible package. From F# 5.0 on packages can be referenced using the following notation:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// Packages hosted by the Fslab community</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: Deedle&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: FSharp.Stats&quot;</span>
<span class="c">// third party .net packages </span>
<span class="pp">#r</span> <span class="s">&quot;nuget: Plotly.NET, 2.0.0-beta5&quot;</span>
<span class="pp">#r</span> <span class="s">&quot;nuget: FSharp.Data&quot;</span>
</code></pre>
<p>after referencing the packages one can access their namespaces and use provided functions. In the following example we will reference the
top level namespaces and then use a function provided by the FSharp.Stats package to calculate a factorial:</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 8)" onmouseover="showTip(event, 'fs2', 8)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 9)" onmouseover="showTip(event, 'fs3', 9)" class="id">Stats</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="id">factorialOf3</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="id">SpecialFunctions</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="m">Factorial</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="id">factorial</span> <span class="n">3</span>
</code></pre>
<table class="pre"><tr><td><pre><code>6.0</code></pre></td></tr></table>
<h2><a name="Data-access" class="anchor" href="#Data-access">Data access</a></h2>
<p>Equipped with these packages we are now ready to tackle promises made in the first paragraph: solving a practical data science problem. We will start by retrieving the data using the FSharp.Data package, subsequently we will use Deedle (link), a powerful data frame library that makes tabular data accessible by data frame programming. (Note that the chosen names give insight on their type, however thanks to FSharp being a strongly typed language and the we can at any time hower over single values to see the assigned type.)</p>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs2', 14)" onmouseover="showTip(event, 'fs2', 14)" class="id">FSharp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs6', 15)" onmouseover="showTip(event, 'fs6', 15)" class="id">Data</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 16)" onmouseover="showTip(event, 'fs1', 16)" class="id">Deedle</span>

<span class="c">// Retrieve data using the FSharp.Data package</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs11', 17)" onmouseover="showTip(event, 'fs11', 17)" class="id">rawData</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs12', 18)" onmouseover="showTip(event, 'fs12', 18)" class="rt">Http</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs13', 19)" onmouseover="showTip(event, 'fs13', 19)" class="id">RequestString</span> <span class="s">@&quot;https://raw.githubusercontent.com/dotnet/machinelearning/master/test/data/housing.txt&quot;</span>

<span class="c">// Use .net Core functions to convert the retrieved string to a stream</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs14', 20)" onmouseover="showTip(event, 'fs14', 20)" class="d">dataAsStream</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs15', 21)" onmouseover="showTip(event, 'fs15', 21)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs16', 22)" onmouseover="showTip(event, 'fs16', 22)" class="id">IO</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs17', 23)" onmouseover="showTip(event, 'fs17', 23)" class="id">MemoryStream</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs11', 24)" onmouseover="showTip(event, 'fs11', 24)" class="id">rawData</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs15', 25)" onmouseover="showTip(event, 'fs15', 25)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs18', 26)" onmouseover="showTip(event, 'fs18', 26)" class="id">Text</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs19', 27)" onmouseover="showTip(event, 'fs19', 27)" class="rt">Encoding</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 28)" onmouseover="showTip(event, 'fs20', 28)" class="id">UTF8</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs21', 29)" onmouseover="showTip(event, 'fs21', 29)" class="id">GetBytes</span><span class="pn">)</span> 

<span class="c">// And finally create a data frame object using the ReadCsv method provided by Deedle.</span>
<span class="c">// Note: Of course you can directly provide the path to a local source.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs22', 30)" onmouseover="showTip(event, 'fs22', 30)" class="id">dataAsFrame</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs23', 31)" onmouseover="showTip(event, 'fs23', 31)" class="m">Frame</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs24', 32)" onmouseover="showTip(event, 'fs24', 32)" class="id">ReadCsv</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs14', 33)" onmouseover="showTip(event, 'fs14', 33)" class="d">dataAsStream</span><span class="pn">,</span><span class="fn">hasHeaders</span><span class="o">=</span><span class="k">true</span><span class="pn">,</span><span class="fn">separators</span><span class="o">=</span><span class="s">&quot;\t&quot;</span><span class="pn">)</span>

<span class="c">// Using the Print() method, we can use the Deedle pretty printer to have a look at the data set.</span>
<span onmouseout="hideTip(event, 'fs22', 34)" onmouseover="showTip(event, 'fs22', 34)" class="id">dataAsFrame</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs25', 35)" onmouseover="showTip(event, 'fs25', 35)" class="id">Print</span><span class="pn">(</span><span class="pn">)</span>
</code></pre>
<table class="pre"><tr><td><pre><code>MedianHomeValue CrimesPerCapita PercentResidental PercentNonRetail CharlesRiver NitricOxides RoomsPerDwelling PercentPre40s EmploymentDistance HighwayDistance TaxRate TeacherRatio BlackIndex PercentLowIncome 
0   -&gt; 24.00           0.00632         18.00             2.310            0            0.5380       6.5750           65.20         4.0900             1               296.0   15.30        396.90     4.98             
1   -&gt; 21.60           0.02731         0.00              7.070            0            0.4690       6.4210           78.90         4.9671             2               242.0   17.80        396.90     9.14             
2   -&gt; 34.70           0.02729         0.00              7.070            0            0.4690       7.1850           61.10         4.9671             2               242.0   17.80        392.83     4.03             
3   -&gt; 33.40           0.03237         0.00              2.180            0            0.4580       6.9980           45.80         6.0622             3               222.0   18.70        394.63     2.94             
4   -&gt; 36.20           0.06905         0.00              2.180            0            0.4580       7.1470           54.20         6.0622             3               222.0   18.70        396.90     5.33             
5   -&gt; 28.70           0.02985         0.00              2.180            0            0.4580       6.4300           58.70         6.0622             3               222.0   18.70        394.12     5.21             
6   -&gt; 22.90           0.08829         12.50             7.870            0            0.5240       6.0120           66.60         5.5605             5               311.0   15.20        395.60     12.43            
7   -&gt; 27.10           0.14455         12.50             7.870            0            0.5240       6.1720           96.10         5.9505             5               311.0   15.20        396.90     19.15            
8   -&gt; 16.50           0.21124         12.50             7.870            0            0.5240       5.6310           100.00        6.0821             5               311.0   15.20        386.63     29.93            
9   -&gt; 18.90           0.17004         12.50             7.870            0            0.5240       6.0040           85.90         6.5921             5               311.0   15.20        386.71     17.10            
10  -&gt; 15.00           0.22489         12.50             7.870            0            0.5240       6.3770           94.30         6.3467             5               311.0   15.20        392.52     20.45            
11  -&gt; 18.90           0.11747         12.50             7.870            0            0.5240       6.0090           82.90         6.2267             5               311.0   15.20        396.90     13.27            
12  -&gt; 21.70           0.09378         12.50             7.870            0            0.5240       5.8890           39.00         5.4509             5               311.0   15.20        390.50     15.71            
13  -&gt; 20.40           0.62976         0.00              8.140            0            0.5380       5.9490           61.80         4.7075             4               307.0   21.00        396.90     8.26             
14  -&gt; 18.20           0.63796         0.00              8.140            0            0.5380       6.0960           84.50         4.4619             4               307.0   21.00        380.02     10.26            
:      ...             ...             ...               ...              ...          ...          ...              ...           ...                ...             ...     ...          ...        ...              
491 -&gt; 13.60           0.10574         0.00              27.740           0            0.6090       5.9830           98.80         1.8681             4               711.0   20.10        390.11     18.07            
492 -&gt; 20.10           0.11132         0.00              27.740           0            0.6090       5.9830           83.50         2.1099             4               711.0   20.10        396.90     13.35            
493 -&gt; 21.80           0.17331         0.00              9.690            0            0.5850       5.7070           54.00         2.3817             6               391.0   19.20        396.90     12.01            
494 -&gt; 24.50           0.27957         0.00              9.690            0            0.5850       5.9260           42.60         2.3817             6               391.0   19.20        396.90     13.59            
495 -&gt; 23.10           0.17899         0.00              9.690            0            0.5850       5.6700           28.80         2.7986             6               391.0   19.20        393.29     17.60            
496 -&gt; 19.70           0.28960         0.00              9.690            0            0.5850       5.3900           72.90         2.7986             6               391.0   19.20        396.90     21.14            
497 -&gt; 18.30           0.26838         0.00              9.690            0            0.5850       5.7940           70.60         2.8927             6               391.0   19.20        396.90     14.10            
498 -&gt; 21.20           0.23912         0.00              9.690            0            0.5850       6.0190           65.30         2.4091             6               391.0   19.20        396.90     12.92            
499 -&gt; 17.50           0.17783         0.00              9.690            0            0.5850       5.5690           73.50         2.3999             6               391.0   19.20        395.77     15.10            
500 -&gt; 16.80           0.22438         0.00              9.690            0            0.5850       6.0270           79.70         2.4982             6               391.0   19.20        396.90     14.33            
501 -&gt; 22.40           0.06263         0.00              11.930           0            0.5730       6.5930           69.10         2.4786             1               273.0   21.00        391.99     9.67             
502 -&gt; 20.60           0.04527         0.00              11.930           0            0.5730       6.1200           76.70         2.2875             1               273.0   21.00        396.90     9.08             
503 -&gt; 23.90           0.06076         0.00              11.930           0            0.5730       6.9760           91.00         2.1675             1               273.0   21.00        396.90     5.64             
504 -&gt; 22.00           0.10959         0.00              11.930           0            0.5730       6.7940           89.30         2.3889             1               273.0   21.00        393.45     6.48             
505 -&gt; 11.90           0.04741         0.00              11.930           0            0.5730       6.0300           80.80         2.5050             1               273.0   21.00        396.90     7.88</code></pre></td></tr></table>
<pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// (**</span>
<span class="c">// ## Data crunching</span>
<span class="c">// The data set of choice is the boston housing data set. As you can see from analyzing the printed output, it consists of 506 rows. Each row represents a house in the boston city area and each column encodes a feature/variable, such as the number of rooms per dwelling (RoomsPerDwelling), Median value of owner-occupied homes in $1000&#39;s (MedianHomeValue) and even variables indicating if the house is bordering river charles (CharlesRiver, value = 1) or not (CharlesRiver, value = 0). </span>

<span class="c">// Lets say in our analysis we are only interested in the variables just described, furthermore we only want to keep rows where the value of the indicator variable is 0. We can use Deedle to easily create a new frame that fullfills our criteria. In this example we also cast the value of the column &quot;CharlesRiver&quot; to be of type bool, this illustrates how data frame programming can become typesafe using deedle.</span>
<span class="c">// *)</span>

<span class="c">// let housesNotAtRiver = </span>
<span class="c">//     dataAsFrame</span>
<span class="c">//     |&gt; Frame.sliceCols [&quot;RoomsPerDwelling&quot;;&quot;MedianHomeValue&quot;;&quot;CharlesRiver&quot;]</span>
<span class="c">//     |&gt; Frame.filterRowValues (fun s -&gt; s.GetAs&lt;bool&gt;(&quot;CharlesRiver&quot;) |&gt; not ) </span>

<span class="c">// //sprintf &quot;The new frame does now contain: %i rows and %i columns&quot; housesNotAtRiver.RowCount housesNotAtRiver.ColumnCount</span>

<span class="c">// housesNotAtRiver.Print()</span>

<span class="c">// (*** include-output ***)</span>

<span class="c">// (**</span>
<span class="c">// ## Data exploration</span>

<span class="c">// Exploratory data analysis is an approach favored by many - to meet this demand we strongly advertise the use of Plotly.Net. The following snippet illustrates how we can access a column of a data frame and create an interactive chart in no time. Since we might want an idea of the distribution of the house prices a histogram can come in handy: </span>
<span class="c">// *)</span>

<span class="c">//open Plotly.NET</span>
<span class="c">// // Note that we explicitly specify that we want to work with the values as floats. </span>
<span class="c">// // Since the row identity is not needed anymore when plotting the distribution we can</span>
<span class="c">// // directly convert the collection to a FSharp Sequence. </span>
<span class="c">// let pricesNotAtRiver : seq&lt;float&gt; = </span>
<span class="c">//     housesNotAtRiver</span>
<span class="c">//     |&gt; Frame.getCol &quot;MedianHomeValue&quot;</span>
<span class="c">//     |&gt; Series.values</span>
    
<span class="c">// let h1 = </span>
<span class="c">//     Chart.Histogram(pricesNotAtRiver)</span>
<span class="c">//     |&gt; Chart.withX_AxisStyle(&quot;median value of owner occupied homes in 1000s&quot;)</span>
<span class="c">//     |&gt; Chart.withX_AxisStyle(&quot;price distribution&quot;)</span>

<span class="c">// (*** condition: ipynb ***)</span>
<span class="c">// #if IPYNB</span>
<span class="c">// h1</span>
<span class="c">// #endif // IPYNB</span>

<span class="c">// (***hide***)</span>
<span class="c">// h1 |&gt; GenericChart.toChartHTML</span>
<span class="c">// (***include-it-raw***)</span>

<span class="c">// (**</span>
<span class="c">// Since plotly charts are interactive they invite us to combine mutliple charts. Let repeat the filter step and see if houses that are located at the river show a similar distribution:</span>
<span class="c">// *)</span>

<span class="c">// let housesAtRiver = </span>
<span class="c">//     dataAsFrame</span>
<span class="c">//     |&gt; Frame.sliceCols [&quot;RoomsPerDwelling&quot;;&quot;MedianHomeValue&quot;;&quot;CharlesRiver&quot;]</span>
<span class="c">//     |&gt; Frame.filterRowValues (fun s -&gt; s.GetAs&lt;bool&gt;(&quot;CharlesRiver&quot;))</span>

<span class="c">// let pricesAtRiver : seq&lt;float&gt; = </span>
<span class="c">//     housesAtRiver</span>
<span class="c">//     |&gt; Frame.getCol &quot;MedianHomeValue&quot;</span>
<span class="c">//     |&gt; Series.values</span>

<span class="c">// let h2 =     </span>
<span class="c">//     [</span>
<span class="c">//     Chart.Histogram(pricesNotAtRiver)</span>
<span class="c">//     |&gt; Chart.withTraceName &quot;not at river&quot;</span>
<span class="c">//     Chart.Histogram(pricesAtRiver)</span>
<span class="c">//     |&gt; Chart.withTraceName &quot;at river&quot;</span>
<span class="c">//     ]</span>
<span class="c">//     |&gt; Chart.Combine</span>
<span class="c">//     |&gt; Chart.withX_AxisStyle(&quot;median value of owner occupied homes in 1000s&quot;)</span>
<span class="c">//     |&gt; Chart.withX_AxisStyle(&quot;Comparison of price distributions&quot;)</span>

<span class="c">// (***hide***)</span>
<span class="c">// h2 |&gt; GenericChart.toChartHTML</span>
<span class="c">// (***include-it-raw***)</span>

<span class="c">// (**</span>
<span class="c">// The interactive chart allows us to compare the distributions directly. We can now reconstruct our own idea of the city of boston, the sampled area, just by looking at the data e.g.:</span>

<span class="c">// Assuming that the sampling process was homogenous while observing that there are much more houses sampled that are not located on the riverside could indicate that a spot on the river is a scarce commodity.</span>
<span class="c">// This could also be backed by analyzing the tails of the distribution: it seems that houses located at the river are given a head-start in their assigned value - the distribution of the riverside houses is truncated on the left. </span>

<span class="c">// Suppose we would have a customer that wants two models, one to predict the prices of a house at the riverside and one that predicts the prices if this is not the case, then we can meet this demand by using FSharp.Stats in combination with Deedle. Of course we need a variable that is indicative of the house price, in this we will check if the number of rooms per dwelling correlates with the house value:</span>
<span class="c">// *)</span>

<span class="c">// let pricesAll :Series&lt;int,float&gt; = </span>
<span class="c">//     dataAsFrame</span>
<span class="c">//     |&gt; Frame.getCol &quot;MedianHomeValue&quot;</span>

<span class="c">// let roomsPerDwellingAll :Series&lt;int,float&gt; = </span>
<span class="c">//     dataAsFrame</span>
<span class="c">//     |&gt; Frame.getCol &quot;RoomsPerDwelling&quot;   </span>

<span class="c">// let correlation = </span>
<span class="c">//     let tmpPrices,tmpRooms = </span>
<span class="c">//         Series.zipInner pricesAll roomsPerDwellingAll    </span>
<span class="c">//         |&gt; Series.values </span>
<span class="c">//         |&gt; Seq.unzip</span>
<span class="c">//     Correlation.Seq.pearson tmpPrices tmpRooms</span>
                                              
<span class="c">// (***include-value:correlation***)</span>

<span class="c">// (**</span>
<span class="c">// So indeed, the number of rooms per dwelling shows a positiv correlation with the house prices. With a pearson correlation of ~0.7 it does not explain the house prices completely - but this is nothing that really surprises us, as one of our hypothesis is that the location (e.g. riverside) does also have influence on the price -  however, it should be sufficient to create a linear model. </span>

<span class="c">// So now we will use FSharp.Stats to build the two linear models ordered by the hypothetical customer. We start by defining a function that performs the fitting and plots the result:</span>
<span class="c">// *)</span>

<span class="c">// open Fitting.LinearRegression.OrdinaryLeastSquares</span>

<span class="c">// let predictPricesByRooms description data = </span>
<span class="c">//     let pricesAll :Series&lt;_,float&gt; = </span>
<span class="c">//         data</span>
<span class="c">//         |&gt; Frame.getCol &quot;MedianHomeValue&quot;</span>

<span class="c">//     let roomsPerDwellingAll :Series&lt;_,float&gt; = </span>
<span class="c">//         data</span>
<span class="c">//         |&gt; Frame.getCol &quot;RoomsPerDwelling&quot;   </span>

<span class="c">//     let fit = </span>
<span class="c">//         let tmpRooms, tmpPrices = </span>
<span class="c">//             Series.zipInner roomsPerDwellingAll pricesAll    </span>
<span class="c">//             |&gt; Series.sortBy fst</span>
<span class="c">//             |&gt; Series.values </span>
<span class="c">//             |&gt; Seq.unzip</span>
<span class="c">//         let coeffs = Linear.Univariable.coefficient (vector tmpRooms) (vector tmpPrices)</span>
<span class="c">//         let model  = Linear.Univariable.fit coeffs </span>
<span class="c">//         let predictedPrices = tmpRooms |&gt; Seq.map model</span>
<span class="c">//         [</span>
<span class="c">//         Chart.Point(tmpRooms,tmpPrices)</span>
<span class="c">//         |&gt; Chart.withTraceName (sprintf &quot;%s: data&quot; description )</span>
<span class="c">//         Chart.Line(tmpRooms,predictedPrices)</span>
<span class="c">//         |&gt; Chart.withTraceName (sprintf &quot;%s: coefficients: intercept:%f, slope:%f&quot; description coeffs.[0] coeffs.[1])</span>
<span class="c">//         ]                                  </span>
<span class="c">//         |&gt; Chart.Combine</span>
<span class="c">//         |&gt; Chart.withX_AxisStyle(&quot;rooms per dwelling&quot;)</span>
<span class="c">//         |&gt; Chart.withY_AxisStyle(&quot;median value&quot;)</span>
<span class="c">//     fit   </span>

<span class="c">// (**</span>
<span class="c">// Afterwards, we can apply the function on our prepared datasets and have a look at the model and especially the model coefficients. </span>
<span class="c">// *)</span>
<span class="c">// let modelVis = </span>
<span class="c">//     [</span>
<span class="c">//     predictPricesByRooms &quot;not at river&quot; housesNotAtRiver</span>
<span class="c">//     predictPricesByRooms &quot;at river&quot; housesAtRiver</span>
<span class="c">//     ]</span>
<span class="c">//     |&gt; Chart.Combine</span>
<span class="c">//     |&gt; Chart.withSize(1200.,700.)</span>

<span class="c">// (***hide***)</span>
<span class="c">// modelVis |&gt; GenericChart.toChartHTML</span>
<span class="c">// (***include-it-raw***)</span>


<span class="c">// (**</span>
<span class="c">// Both models approximate the data in a reasonable way. When we inspect the coefficients, we see that the models only differ slightly in slope, but have an absolute offset of ~7.5. This observation complements the insights gained by the explorative data analysis approach using the histogram! </span>
<span class="c">// *)</span>
</code></pre>

                </div>
            </div>
        </div>
        <div class="fsdocs-tip" id="fs1">namespace Deedle</div>
<div class="fsdocs-tip" id="fs2">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="fsdocs-tip" id="fs3">namespace FSharp.Stats</div>
<div class="fsdocs-tip" id="fs4">namespace Plotly</div>
<div class="fsdocs-tip" id="fs5">namespace Plotly.NET</div>
<div class="fsdocs-tip" id="fs6">Multiple items<br />namespace FSharp.Data<br /><br />--------------------<br />namespace Microsoft.FSharp.Data</div>
<div class="fsdocs-tip" id="fs7">val factorialOf3 : float</div>
<div class="fsdocs-tip" id="fs8">namespace FSharp.Stats.SpecialFunctions</div>
<div class="fsdocs-tip" id="fs9">module Factorial<br /><br />from FSharp.Stats.SpecialFunctions</div>
<div class="fsdocs-tip" id="fs10">val factorial : x:int -&gt; float</div>
<div class="fsdocs-tip" id="fs11">val rawData : string</div>
<div class="fsdocs-tip" id="fs12">type Http =<br />&#160;&#160;private new : unit -&gt; Http<br />&#160;&#160;static member private AppendQueryToUrl : url:string * query:(string * string) list -&gt; string<br />&#160;&#160;static member AsyncRequest : url:string * ?query:(string * string) list * ?headers:seq&lt;string * string&gt; * ?httpMethod:string * ?body:HttpRequestBody * ?cookies:seq&lt;string * string&gt; * ?cookieContainer:CookieContainer * ?silentHttpErrors:bool * ?silentCookieErrors:bool * ?responseEncodingOverride:string * ?customizeHttpRequest:(HttpWebRequest -&gt; HttpWebRequest) * ?timeout:int -&gt; Async&lt;HttpResponse&gt;<br />&#160;&#160;static member AsyncRequestStream : url:string * ?query:(string * string) list * ?headers:seq&lt;string * string&gt; * ?httpMethod:string * ?body:HttpRequestBody * ?cookies:seq&lt;string * string&gt; * ?cookieContainer:CookieContainer * ?silentHttpErrors:bool * ?silentCookieErrors:bool * ?customizeHttpRequest:(HttpWebRequest -&gt; HttpWebRequest) * ?timeout:int -&gt; Async&lt;HttpResponseWithStream&gt;<br />&#160;&#160;static member AsyncRequestString : url:string * ?query:(string * string) list * ?headers:seq&lt;string * string&gt; * ?httpMethod:string * ?body:HttpRequestBody * ?cookies:seq&lt;string * string&gt; * ?cookieContainer:CookieContainer * ?silentHttpErrors:bool * ?silentCookieErrors:bool * ?responseEncodingOverride:string * ?customizeHttpRequest:(HttpWebRequest -&gt; HttpWebRequest) * ?timeout:int -&gt; Async&lt;string&gt;<br />&#160;&#160;static member private EncodeFormData : query:string -&gt; string<br />&#160;&#160;static member private EncodeUrlParam : param:string -&gt; string<br />&#160;&#160;static member private InnerRequest : url:string * toHttpResponse:(string -&gt; int -&gt; string -&gt; string -&gt; &#39;a0 option -&gt; Map&lt;string,string&gt; -&gt; Map&lt;string,string&gt; -&gt; Stream -&gt; Async&lt;&#39;a1&gt;) * ?query:(string * string) list * ?headers:seq&lt;string * string&gt; * ?httpMethod:string * ?body:HttpRequestBody * ?cookies:seq&lt;string * string&gt; * ?cookieContainer:CookieContainer * ?silentHttpErrors:bool * ?silentCookieErrors:bool * ?responseEncodingOverride:&#39;a0 * ?customizeHttpRequest:(HttpWebRequest -&gt; HttpWebRequest) * ?timeout:int -&gt; Async&lt;&#39;a1&gt;<br />&#160;&#160;static member Request : url:string * ?query:(string * string) list * ?headers:seq&lt;string * string&gt; * ?httpMethod:string * ?body:HttpRequestBody * ?cookies:seq&lt;string * string&gt; * ?cookieContainer:CookieContainer * ?silentHttpErrors:bool * ?silentCookieErrors:bool * ?responseEncodingOverride:string * ?customizeHttpRequest:(HttpWebRequest -&gt; HttpWebRequest) * ?timeout:int -&gt; HttpResponse<br />&#160;&#160;static member RequestStream : url:string * ?query:(string * string) list * ?headers:seq&lt;string * string&gt; * ?httpMethod:string * ?body:HttpRequestBody * ?cookies:seq&lt;string * string&gt; * ?cookieContainer:CookieContainer * ?silentHttpErrors:bool * ?silentCookieErrors:bool * ?customizeHttpRequest:(HttpWebRequest -&gt; HttpWebRequest) * ?timeout:int -&gt; HttpResponseWithStream<br />&#160;&#160;...</div>
<div class="fsdocs-tip" id="fs13">Multiple items<br />static member Http.RequestString : url:string * ?query:(string * string) list * ?headers:seq&lt;string * string&gt; * ?httpMethod:string * ?body:HttpRequestBody * ?cookies:seq&lt;string * string&gt; * ?cookieContainer:System.Net.CookieContainer * ?silentHttpErrors:bool * ?silentCookieErrors:bool * ?responseEncodingOverride:string * ?customizeHttpRequest:(System.Net.HttpWebRequest -&gt; System.Net.HttpWebRequest) * ?timeout:int -&gt; string<br /><br />--------------------<br />static member Http.RequestString : url:string * ?query:(string * string) list * ?headers:seq&lt;string * string&gt; * ?httpMethod:string * ?body:HttpRequestBody * ?cookies:seq&lt;string * string&gt; * ?cookieContainer:System.Net.CookieContainer * ?silentHttpErrors:bool * ?silentCookieErrors:bool * ?responseEncodingOverride:string * ?customizeHttpRequest:(System.Net.HttpWebRequest -&gt; System.Net.HttpWebRequest) * ?timeout:int -&gt; string</div>
<div class="fsdocs-tip" id="fs14">val dataAsStream : System.IO.MemoryStream</div>
<div class="fsdocs-tip" id="fs15">namespace System</div>
<div class="fsdocs-tip" id="fs16">namespace System.IO</div>
<div class="fsdocs-tip" id="fs17">Multiple items<br />type MemoryStream =<br />&#160;&#160;inherit Stream<br />&#160;&#160;new : unit -&gt; MemoryStream + 6 overloads<br />&#160;&#160;member BeginRead : buffer:byte[] * offset:int * count:int * callback:AsyncCallback * state:obj -&gt; IAsyncResult<br />&#160;&#160;member BeginWrite : buffer:byte[] * offset:int * count:int * callback:AsyncCallback * state:obj -&gt; IAsyncResult<br />&#160;&#160;member CanRead : bool<br />&#160;&#160;member CanSeek : bool<br />&#160;&#160;member CanWrite : bool<br />&#160;&#160;member Capacity : int with get, set<br />&#160;&#160;member CopyTo : destination:Stream * bufferSize:int -&gt; unit<br />&#160;&#160;member CopyToAsync : destination:Stream * bufferSize:int * cancellationToken:CancellationToken -&gt; Task<br />&#160;&#160;member EndRead : asyncResult:IAsyncResult -&gt; int<br />&#160;&#160;...<br /><br />--------------------<br />System.IO.MemoryStream() : System.IO.MemoryStream<br />System.IO.MemoryStream(buffer: byte []) : System.IO.MemoryStream<br />System.IO.MemoryStream(capacity: int) : System.IO.MemoryStream<br />System.IO.MemoryStream(buffer: byte [], writable: bool) : System.IO.MemoryStream<br />System.IO.MemoryStream(buffer: byte [], index: int, count: int) : System.IO.MemoryStream<br />System.IO.MemoryStream(buffer: byte [], index: int, count: int, writable: bool) : System.IO.MemoryStream<br />System.IO.MemoryStream(buffer: byte [], index: int, count: int, writable: bool, publiclyVisible: bool) : System.IO.MemoryStream</div>
<div class="fsdocs-tip" id="fs18">namespace System.Text</div>
<div class="fsdocs-tip" id="fs19">type Encoding =<br />&#160;&#160;member BodyName : string<br />&#160;&#160;member Clone : unit -&gt; obj<br />&#160;&#160;member CodePage : int<br />&#160;&#160;member DecoderFallback : DecoderFallback with get, set<br />&#160;&#160;member EncoderFallback : EncoderFallback with get, set<br />&#160;&#160;member EncodingName : string<br />&#160;&#160;member Equals : value:obj -&gt; bool<br />&#160;&#160;member GetByteCount : chars:char[] -&gt; int + 5 overloads<br />&#160;&#160;member GetBytes : chars:char[] -&gt; byte[] + 7 overloads<br />&#160;&#160;member GetCharCount : bytes:byte[] -&gt; int + 3 overloads<br />&#160;&#160;...</div>
<div class="fsdocs-tip" id="fs20">property System.Text.Encoding.UTF8: System.Text.Encoding with get</div>
<div class="fsdocs-tip" id="fs21">System.Text.Encoding.GetBytes(s: string) : byte []<br />System.Text.Encoding.GetBytes(chars: char []) : byte []<br />System.Text.Encoding.GetBytes(chars: System.ReadOnlySpan&lt;char&gt;, bytes: System.Span&lt;byte&gt;) : int<br />System.Text.Encoding.GetBytes(s: string, index: int, count: int) : byte []<br />System.Text.Encoding.GetBytes(chars: char [], index: int, count: int) : byte []<br />System.Text.Encoding.GetBytes(chars: nativeptr&lt;char&gt;, charCount: int, bytes: nativeptr&lt;byte&gt;, byteCount: int) : int<br />System.Text.Encoding.GetBytes(s: string, charIndex: int, charCount: int, bytes: byte [], byteIndex: int) : int<br />System.Text.Encoding.GetBytes(chars: char [], charIndex: int, charCount: int, bytes: byte [], byteIndex: int) : int</div>
<div class="fsdocs-tip" id="fs22">val dataAsFrame : Frame&lt;int,string&gt;</div>
<div class="fsdocs-tip" id="fs23">Multiple items<br />module Frame<br /><br />from Deedle<br /><br />--------------------<br />type Frame =<br />&#160;&#160;static member ReadCsv : stream:Stream * hasHeaders:Nullable&lt;bool&gt; * inferTypes:Nullable&lt;bool&gt; * inferRows:Nullable&lt;int&gt; * schema:string * separators:string * culture:string * maxRows:Nullable&lt;int&gt; * missingValues:string [] * preferOptions:Nullable&lt;bool&gt; -&gt; Frame&lt;int,string&gt;<br />&#160;&#160;static member ReadCsv : location:string * hasHeaders:Nullable&lt;bool&gt; * inferTypes:Nullable&lt;bool&gt; * inferRows:Nullable&lt;int&gt; * schema:string * separators:string * culture:string * maxRows:Nullable&lt;int&gt; * missingValues:string [] * preferOptions:bool -&gt; Frame&lt;int,string&gt;<br />&#160;&#160;static member ReadReader : reader:IDataReader -&gt; Frame&lt;int,string&gt;<br />&#160;&#160;static member CustomExpanders : Dictionary&lt;Type,Func&lt;obj,seq&lt;string * Type * obj&gt;&gt;&gt;<br />&#160;&#160;static member NonExpandableInterfaces : ResizeArray&lt;Type&gt;<br />&#160;&#160;static member NonExpandableTypes : HashSet&lt;Type&gt;<br /><br />--------------------<br />type Frame&lt;&#39;TRowKey,&#39;TColumnKey (requires equality and equality)&gt; =<br />&#160;&#160;interface IDynamicMetaObjectProvider<br />&#160;&#160;interface INotifyCollectionChanged<br />&#160;&#160;interface IFsiFormattable<br />&#160;&#160;interface IFrame<br />&#160;&#160;new : names:seq&lt;&#39;TColumnKey&gt; * columns:seq&lt;ISeries&lt;&#39;TRowKey&gt;&gt; -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />&#160;&#160;new : rowIndex:IIndex&lt;&#39;TRowKey&gt; * columnIndex:IIndex&lt;&#39;TColumnKey&gt; * data:IVector&lt;IVector&gt; * indexBuilder:IIndexBuilder * vectorBuilder:IVectorBuilder -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />&#160;&#160;member AddColumn : column:&#39;TColumnKey * series:ISeries&lt;&#39;TRowKey&gt; -&gt; unit<br />&#160;&#160;member AddColumn : column:&#39;TColumnKey * series:seq&lt;&#39;V&gt; -&gt; unit<br />&#160;&#160;member AddColumn : column:&#39;TColumnKey * series:ISeries&lt;&#39;TRowKey&gt; * lookup:Lookup -&gt; unit<br />&#160;&#160;member AddColumn : column:&#39;TColumnKey * series:seq&lt;&#39;V&gt; * lookup:Lookup -&gt; unit<br />&#160;&#160;...<br /><br />--------------------<br />new : names:seq&lt;&#39;TColumnKey&gt; * columns:seq&lt;ISeries&lt;&#39;TRowKey&gt;&gt; -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;<br />new : rowIndex:Indices.IIndex&lt;&#39;TRowKey&gt; * columnIndex:Indices.IIndex&lt;&#39;TColumnKey&gt; * data:IVector&lt;IVector&gt; * indexBuilder:Indices.IIndexBuilder * vectorBuilder:Vectors.IVectorBuilder -&gt; Frame&lt;&#39;TRowKey,&#39;TColumnKey&gt;</div>
<div class="fsdocs-tip" id="fs24">static member Frame.ReadCsv : path:string * ?hasHeaders:bool * ?inferTypes:bool * ?inferRows:int * ?schema:string * ?separators:string * ?culture:string * ?maxRows:int * ?missingValues:string [] * ?preferOptions:bool -&gt; Frame&lt;int,string&gt;<br />static member Frame.ReadCsv : stream:System.IO.Stream * ?hasHeaders:bool * ?inferTypes:bool * ?inferRows:int * ?schema:string * ?separators:string * ?culture:string * ?maxRows:int * ?missingValues:string [] * ?preferOptions:bool -&gt; Frame&lt;int,string&gt;<br />static member Frame.ReadCsv : reader:System.IO.TextReader * ?hasHeaders:bool * ?inferTypes:bool * ?inferRows:int * ?schema:string * ?separators:string * ?culture:string * ?maxRows:int * ?missingValues:string [] * ?preferOptions:bool -&gt; Frame&lt;int,string&gt;<br />static member Frame.ReadCsv : stream:System.IO.Stream * hasHeaders:System.Nullable&lt;bool&gt; * inferTypes:System.Nullable&lt;bool&gt; * inferRows:System.Nullable&lt;int&gt; * schema:string * separators:string * culture:string * maxRows:System.Nullable&lt;int&gt; * missingValues:string [] * preferOptions:System.Nullable&lt;bool&gt; -&gt; Frame&lt;int,string&gt;<br />static member Frame.ReadCsv : location:string * hasHeaders:System.Nullable&lt;bool&gt; * inferTypes:System.Nullable&lt;bool&gt; * inferRows:System.Nullable&lt;int&gt; * schema:string * separators:string * culture:string * maxRows:System.Nullable&lt;int&gt; * missingValues:string [] * preferOptions:bool -&gt; Frame&lt;int,string&gt;<br />static member Frame.ReadCsv : path:string * indexCol:string * ?hasHeaders:bool * ?inferTypes:bool * ?inferRows:int * ?schema:string * ?separators:string * ?culture:string * ?maxRows:int * ?missingValues:string [] * ?preferOptions:bool -&gt; Frame&lt;&#39;R,string&gt; (requires equality)</div>
<div class="fsdocs-tip" id="fs25">static member FrameExtensions.Print : frame:Frame&lt;&#39;K,&#39;V&gt; -&gt; unit (requires equality and equality)<br />static member FrameExtensions.Print : frame:Frame&lt;&#39;K,&#39;V&gt; * printTypes:bool -&gt; unit (requires equality and equality)</div>

    </div>

    <!-- BEGIN SEARCH BOX: this adds support for the search box -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.css" />
    <script type="text/javascript">var fsdocs_search_baseurl = '/fslabsite/content/tutorials/'</script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.8/lunr.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/JavaScript-autoComplete/1.0.4/auto-complete.min.js"></script>
    <script type="text/javascript" src="/fslabsite/content/tutorials/content/fsdocs-search.js"></script>
    <!-- END SEARCH BOX: this adds support for the search box -->
</body>

</html>